<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <title>duchamp_reader {% block titre %}{% endblock %}</title>
            {% include "partials/metadata.html" %}
            {% include "partials/css.html" %}
        </style>
    </head>
    <body>
        <!-- barre de navigation -->
        <nav class="navbar navbar-expand-md navbar-light bg-light fixed-top" id="mainNav">
            <div class="container-fluid">
                <!-- burger -->
                <input class="checkbox" type="checkbox" onclick="collapse()"/>
                <div class="hamburger-lines">
                    <span class="line line1"></span>
                    <span class="line line2"></span>
                    <span class="line line3"></span>
                </div>

                <!-- logo -->
                <a class="navbar-brand" href="{{ url_for('accueil') }}">duchamp_reader</a>

                <!-- recherche rapide -->
                <form class="form-inline" action="{{url_for('recherche')}}" method="GET">
                    <input class="form-control" name="keyword" type="search" placeholder="Recherche rapide"
                        aria-label="Recherche">
                        <button class="btn btn-outline-info" type="submit">Rechercher</button>
                </form>

                <!-- inscription, connexion, déconnexion -->
                {% if not current_user.is_authenticated %}
                    <a href="{{ url_for('connexion') }}">
                        <button class="btn btn-outline-info">Connexion</button>
                    </a>
                    <a href="{{ url_for('inscription') }}">
                        <button class="btn btn-outline-info">Inscription</button>
                    </a>
                {% else %}
                    <a href="{{ url_for('deconnexion') }}">
                        <button class="btn btn-outline-info">Déconnexion</button>
                    </a>
                {% endif %}
            </div>
        </nav>

        <div class="container">
            <!-- recherche -->
            {% block homesearch %}{% endblock %}

            <!-- sidebar -->
            <div class="wrapper" id="sidebar" style="width: 0px;">
                <nav>
                    <div class="sidebar-header">
                        <h3>Menu</h3>
                    </div>
                    <ul class="list-unstyled components">
                        <li class="active" id="sidebarAccueil">
                            <a href="{{ url_for('accueil') }}" class="dropdown">
                                Accueil
                            </a>
                        </li>
                        <li class="active">
                            <a href="{{ url_for('nomination_index') }}">
                                Nominations
                            </a>
                            <ul class="list-unstyled" id="nominationMenu">
                                {% if last_nominations %}
                                    {% for n in last_nominations %}
                                        <li><a href="{{ url_for('artiste_main', id_artiste=n.id_artiste) }}">
                                        {% if n.laureat == 1 %}Lauréat : {% else %}Nominé.e : {% endif %}
                                        {{n.artiste.prenom}} {{n.artiste.nom}}</a></li>
                                    {% endfor %}
                                {% endif %}
                            </ul>
                        </li>
                        <li class="active">
                            <a href="{{ url_for('artiste_index') }}">
                                Artistes
                            </a>
                            <ul class="list-unstyled" id="artisteMenu">
                                {% if last_artistes %}
                                    {% for n in last_artistes %}
                                        <li><a href="{{ url_for('artiste_main', id_artiste=n.id) }}">{{n.prenom}} {{n.nom}}</a></li>
                                    {% endfor %}
                                {% endif %}
                            </ul>
                        </li>
                        <li class="active">
                            <a href="{{ url_for('galerie_index') }}">
                                Galeries
                            </a>
                            <ul class="list-unstyled" id="galerieMenu">
                                {% if last_galeries %}
                                    {% for n in last_galeries %}
                                        <li><a href="{{ url_for('galerie_main', id_galerie=n.id) }}">{{n.nom}}</a></li>
                                    {% endfor %}
                                {% endif %}
                            </ul>
                        </li>
                        <li class="active">
                            <a href="{{ url_for('theme_index') }}">
                                Thèmes
                            </a>
                            <ul class="list-unstyled" id="themeMenu">
                                {% if last_themes %}
                                    {% for n in last_themes %}
                                        <li><a href="{{ url_for('theme_main', id_theme=n.id) }}">{{n.nom}}</a></li>
                                    {% endfor %}
                                {% endif %}
                            </ul>
                        </li>
                        <li class="active">
                            <a href="{{ url_for('ville_index') }}">
                                Villes
                            </a>
                            <ul class="list-unstyled" id="villeMenu">
                                {% if last_villes %}
                                    {% for n in last_villes %}
                                        <li><a href="{{ url_for('ville_main', id_ville=n.id) }}">{{n.nom}} ({{n.pays}})</a></li>
                                    {% endfor %}
                                {% endif %}
                            </ul>
                        </li>
                        <li class="active" id="sidebarAbout">
                            <a href="{{ url_for('about') }}">
                                À propos
                            </a>
                        </li>
                        <li class="active">
                            <a href="https://github.com/paulhectork/tnah2021_python_duchamp_reader">
                                Code source (Github)
                            </a>
                        </li>
                    </ul>
                    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()" id="sidebarFermer">Fermer</a>
                </nav>
            </div>

            <!-- corps du texte -->
            <div class="row">
                <div class="col">
                    {% block corps %}{% endblock %}
                </div>
            </div>

                <!-- flash de tout va bien -->
                {% with messages = get_flashed_messages(category_filter=['success']) %}
                    {% if messages %}
                        <div class="alert-success">
                            {% for m in messages %}
                                <p>{{m}}</p>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endwith %}
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
                crossorigin="anonymous"></script>

            <script type="text/javascript">
                var sidebar = document.querySelector("#sidebar");
                var main = document.querySelector(".row");
                var hero = document.querySelector(".hero");

                function collapse() {
                    if (sidebar.getAttribute("style") == "width: 0px;") {
                        sidebar.setAttribute("style", "width: 250px; padding-left: 10px;");
                        main.setAttribute("style", "margin-left: 250px;");
                        hero.setAttribute("style", "margin-left: 250px;");
                    } else {
                        sidebar.setAttribute("style", "width: 0px;");
                        main.setAttribute("style", "margin-left: auto;");
                        hero.setAttribute("style", "margin-left: auto;");
                    };
                };

                function closeNav() {
                    sidebar.setAttribute("style", "width: 0px;");
                    main.setAttribute("style", "margin-left: auto;");
                    hero.setAttribute("style", "margin-left: auto;");
                };
            </script>
    </body>
</html>